"use strict";(self["webpackChunkfrontend_controladora_js"]=self["webpackChunkfrontend_controladora_js"]||[]).push([[424],{9424:function(e,l,o){o.r(l),o.d(l,{default:function(){return K}});var t=o(641),a=o(33),i=o(3751);const n={key:0,class:"edit-form"},s=(0,t.Lk)("h4",null,"Code lines",-1),c=[s],r={key:1},u=(0,t.Lk)("br",null,null,-1),d=(0,t.Lk)("p",null,"Please click on a Tutorial...",-1),p=[u,d],h={key:2,class:"edit-form"},k={class:"list-group"},g={id:"cuadro"},b=["onUpdate:modelValue","onChange"],_={class:"row"},m=["onChange","onUpdate:modelValue"],L=["onChange","onUpdate:modelValue"],w=["onClick"],y=(0,t.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-dash-circle",viewBox:"0 0 16 16"},[(0,t.Lk)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),(0,t.Lk)("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8"})],-1),f=[y],v=["onUpdate:modelValue"],A={class:"list-group-item"},B={class:"input-group"},T=["onKeypress","onUpdate:modelValue"],C={class:"pb-5"},q=(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,"Añadir bloque:")],-1);function x(e,l,o,s,u,d){return(0,t.uX)(),(0,t.CE)(t.FK,null,[u.currentTutorial?((0,t.uX)(),(0,t.CE)("div",n,c)):((0,t.uX)(),(0,t.CE)("div",r,p)),u.blockList?((0,t.uX)(),(0,t.CE)("div",h,[(0,t.Lk)("ul",k,[(0,t.Lk)("form",g,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(u.blockList,((e,l)=>((0,t.uX)(),(0,t.CE)("li",{class:"list-group-item",key:l},[(0,t.Lk)("strong",null,"Block: "+(0,a.v_)(e.distinct_bloques),1),(0,t.eW)("   "),e.codigo?(0,t.bo)(((0,t.uX)(),(0,t.CE)("input",{key:0,"onUpdate:modelValue":l=>e.codigo[0].paralelo=l,type:"checkbox",onChange:l=>d.setParalelBlock(e)},null,40,b)),[[i.lH,e.codigo[0].paralelo]]):(0,t.Q3)("",!0),(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.codigo,((e,l)=>((0,t.uX)(),(0,t.CE)("li",{class:"list-group-item",key:l},[(0,t.Lk)("div",_,[(0,t.bo)((0,t.Lk)("input",{onChange:l=>d.updateLinea(e),type:"checkbox","onUpdate:modelValue":l=>e.run_as_sudo=l},null,40,m),[[i.lH,e.run_as_sudo]]),(0,t.eW)("   "),(0,t.bo)((0,t.Lk)("input",{onChange:l=>d.updateLinea(e),class:"contform-rol col",type:"text","onUpdate:modelValue":l=>e.linea=l},null,40,L),[[i.Jo,e.linea]]),(0,t.eW)("   "),(0,t.Lk)("a",null,[(0,t.Lk)("button",{type:"button",class:"btn btn-danger col",onClick:l=>d.deleteLine(e.id)},f,8,w)]),(0,t.bo)((0,t.Lk)("input",{type:"hidden","onUpdate:modelValue":l=>e.id=l},null,8,v),[[i.Jo,e.id]])])])))),128)),(0,t.Lk)("li",A,[(0,t.Lk)("div",B,[(0,t.bo)((0,t.Lk)("input",{onKeypress:(0,i.jR)((o=>d.newLine(this.id_backup,e.distinct_bloques,l)),["enter"]),"onUpdate:modelValue":e=>u.new_line_array[l]=e,type:"text",class:"form-control",placeholder:"+ Añadir","aria-label":"Username","aria-describedby":"basic-addon1"},null,40,T),[[i.Jo,u.new_line_array[l]]])])])])])))),128))])])])):(0,t.Q3)("",!0),(0,t.Lk)("div",C,[q,(0,t.bo)((0,t.Lk)("input",{id:"add-bloque",onKeypress:l[0]||(l[0]=(0,i.jR)((e=>d.newBlockAndLine(this.id_backup)),["enter"])),"onUpdate:modelValue":l[1]||(l[1]=e=>u.new_line_block=e),type:"text",class:"form-control",placeholder:"+ Añadir","aria-label":"Username","aria-describedby":"basic-addon1"},null,544),[[i.Jo,u.new_line_block]])])],64)}o(4114);var U=o(6405),$=o(4753);class V{getAll(){return $.A.get("/backups")}get(e){return $.A.get(`/backups/${e}`)}create(e){return $.A.post("/backups",e)}update(e,l){return $.A.put(`/codigos/${e}`,l)}delete(e){return $.A.delete(`/codigos/${e}`)}deleteAll(){return $.A.delete("/tutorials")}findByTitle(e){return $.A.get(`/tutorials?title=${e}`)}findDifferentBackupBlocks(e){return $.A.get(`/codigos/diffblocksbkpid?id_backup=${e}`)}findLinesOfBlock(e,l){return $.A.get(`/codigos/codebackupblock?id_backup=${e}&no_bloque=${l}`)}addLinea(e){return $.A.post("/codigos/addlinetospecificblock",e)}addBloque(e){return console.log(e),$.A.post("/codigos/addlinetospecificbackup",e)}updateParallelism(e){return console.log(e),$.A.put("/codigos/updateparallelism",e)}}var E=new V,X={name:"backup-view",data(){return{id_backup:null,no_bloque:null,currentTutorial:null,blockList:null,message:"",auxBackupId:null,auxNoBloque:null,currentBlock:[],new_line_array:[],new_line_block:null,x:0,y:0}},methods:{scrollToItem(e){const l=document.getElementById(e);l.scrollIntoView()},setActive(e){console.log("Holi :)",e)},updateLinea(e){E.update(e.id,e).then((e=>{console.log(e.data)})).catch((e=>{console.log(e)}))},setParalelBlock(e){var l={id_backup:e.codigo[0].id_backup,no_bloque:e.codigo[0].no_bloque,paralelo:e.codigo[0].paralelo};E.updateParallelism(l).then((e=>{console.log(e.data)})).catch((e=>{console.log(e)}))},async newLine(e,l,o){console.log(e,l,this.new_line_array[o]);var t={id_backup:e,no_linea:null,linea:this.new_line_array[o],run_as_sudo:0,paralelo:0,no_bloque:l};await E.addLinea(t).then((e=>{console.log(e.data),this.new_line_array[o]="",this.retreiveBlocks(this.$route.params.id)})).catch((e=>{console.log(e)}))},newBlockAndLine(e){console.log(e,this.new_line_block);var l={id_backup:e,linea:this.new_line_block};E.addBloque(l).then((e=>{console.log("Response del codigosdataservice.addBlk"),console.log(e.data),this.new_line_block="",this.scrollToItem("bottom"),this.retreiveBlocks(this.$route.params.id)})).catch((e=>{console.log(e)}))},savePos(){this.x=window.scrollX,this.y=window.scrollY},gotoPos(){console.log(this.x,this.y),window.scrollTo(this.x,this.y)},async deleteLine(e){console.log("Borranding: ",e),await E.delete(e).then((e=>{console.log(e.data)})).catch((e=>{console.log(e)})),this.retreiveBlocks(this.id_backup)},async retreiveLinesOfBlock(e,l){return await new Promise(((o,t)=>{E.findLinesOfBlock(e,l).then((e=>{o(e.data)})).catch((e=>{t(e)}))}))},async retreiveBlocks(e){await E.findDifferentBackupBlocks(e).then((async e=>{this.blockList=e.data;for(let l in this.blockList){let e=await this.retreiveLinesOfBlock(this.id_backup,this.blockList[l].distinct_bloques);this.blockList[l].codigo=e}console.log(this.blockList)})).catch((e=>{console.log(e)}))},getTutorial(e){U.A.get(e).then((e=>{this.currentTutorial=e.data,console.log(e.data)})).catch((e=>{console.log(e)}))},updatePublished(e){var l={id:this.currentTutorial.id,title:this.currentTutorial.title,description:this.currentTutorial.description,published:e};U.A.update(this.currentTutorial.id,l).then((l=>{console.log(l.data),this.currentTutorial.published=e,this.message="The status was updated successfully!"})).catch((e=>{console.log(e)}))},updateTutorial(){U.A.update(this.currentTutorial.id,this.currentTutorial).then((e=>{console.log(e.data),this.message="The tutorial was updated successfully!"})).catch((e=>{console.log(e)}))},deleteTutorial(){U.A.delete(this.currentTutorial.id).then((e=>{console.log(e.data),this.$router.push({name:"tutorials"})})).catch((e=>{console.log(e)}))}},async mounted(){this.message="",this.id_backup=this.$route.params.id,await this.retreiveBlocks(this.$route.params.id),this.getTutorial(this.$route.params.id)}},P=o(6262);const I=(0,P.A)(X,[["render",x]]);var K=I}}]);
//# sourceMappingURL=424.1e50f617.js.map