"use strict";(self["webpackChunkfrontend_controladora_js"]=self["webpackChunkfrontend_controladora_js"]||[]).push([[166],{9166:function(a,t,e){e.r(t),e.d(t,{default:function(){return Ta}});var r=e(641),s=e(33),l=e(3751);const n=a=>((0,r.Qi)("data-v-4214bf40"),a=a(),(0,r.jt)(),a),i={class:"list row"},o={class:"col-md-3"},c=n((()=>(0,r.Lk)("h4",null,"Backups list",-1))),u={class:"list-group"},d=["onClick"],h={class:"container"},p={class:"row"},k={class:"col"},b={class:"col-"},m=n((()=>(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-check-circle-fill",viewBox:"0 0 16 16"},[(0,r.Lk)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})],-1))),v=[m],g=n((()=>(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-exclamation-circle-fill",viewBox:"0 0 16 16"},[(0,r.Lk)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})],-1))),L=[g],w=n((()=>(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x-circle-fill",viewBox:"0 0 16 16"},[(0,r.Lk)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"})],-1))),A=[w],f={class:"list-group-item"},y={class:"input-group"},M={class:"col-md-4"},_={key:0},C=n((()=>(0,r.Lk)("h4",null,"Metadata",-1))),x=n((()=>(0,r.Lk)("label",null,[(0,r.Lk)("strong",null,"Server hostname:")],-1))),B={class:"input-group mb-3"},E=n((()=>(0,r.Lk)("label",null,[(0,r.Lk)("strong",null,"NAS Hostname:")],-1))),H={class:"input-group mb-3"},U=n((()=>(0,r.Lk)("label",null,[(0,r.Lk)("strong",null,"NAS path:")],-1))),X={class:"input-group mb-3"},V=n((()=>(0,r.Lk)("label",null,[(0,r.Lk)("strong",null,"Run As Sudo Header:")],-1))),T={key:0},S={key:1},I={class:"input-group mb-3"},F=n((()=>(0,r.Lk)("label",null,[(0,r.Lk)("strong",null,"Server username:")],-1))),N={class:"input-group mb-3"},O=n((()=>(0,r.Lk)("label",null,[(0,r.Lk)("strong",null,"Server password:")],-1))),R={class:"input-group mb-3"},z=n((()=>(0,r.Lk)("label",null,[(0,r.Lk)("strong",null,"Server SSH port:")],-1))),P={class:"input-group mb-3"},J=n((()=>(0,r.Lk)("label",null,[(0,r.Lk)("strong",null,"Max retry attempts:")],-1))),Q={class:"input-group mb-3"},$={key:0},q=n((()=>(0,r.Lk)("label",null,[(0,r.Lk)("strong",null,"Action:")],-1))),D=n((()=>(0,r.Lk)("br",null,null,-1))),K=n((()=>(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-caret-right",viewBox:"0 0 16 16"},[(0,r.Lk)("path",{d:"M6 12.796V3.204L11.481 8zm.659.753 5.48-4.796a1 1 0 0 0 0-1.506L6.66 2.451C6.011 1.885 5 2.345 5 3.204v9.592a1 1 0 0 0 1.659.753"})],-1))),j=[K],W=n((()=>(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-body-text",viewBox:"0 0 16 16"},[(0,r.Lk)("path",{"fill-rule":"evenodd",d:"M0 .5A.5.5 0 0 1 .5 0h4a.5.5 0 0 1 0 1h-4A.5.5 0 0 1 0 .5m0 2A.5.5 0 0 1 .5 2h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m9 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m-9 2A.5.5 0 0 1 .5 4h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5m5 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m7 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5m-12 2A.5.5 0 0 1 .5 6h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5m8 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m-8 2A.5.5 0 0 1 .5 8h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m7 0a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-7 2a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5"})],-1))),G=[W],Y=n((()=>(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-floppy",viewBox:"0 0 16 16"},[(0,r.Lk)("path",{d:"M11 2H9v3h2z"}),(0,r.Lk)("path",{d:"M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0M1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5m3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4zM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5z"})],-1))),Z=[Y],aa=n((()=>(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-dash-circle",viewBox:"0 0 16 16"},[(0,r.Lk)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),(0,r.Lk)("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8"})],-1))),ta=[aa],ea={key:1},ra=n((()=>(0,r.Lk)("label",null,[(0,r.Lk)("strong",null,"Action:")],-1))),sa=n((()=>(0,r.Lk)("br",null,null,-1))),la=n((()=>(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-floppy",viewBox:"0 0 16 16"},[(0,r.Lk)("path",{d:"M11 2H9v3h2z"}),(0,r.Lk)("path",{d:"M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0M1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5m3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4zM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5z"})],-1))),na=[la],ia=n((()=>(0,r.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-dash-circle",viewBox:"0 0 16 16"},[(0,r.Lk)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),(0,r.Lk)("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8"})],-1))),oa=[ia],ca={key:0,class:"col"},ua={key:0},da=n((()=>(0,r.Lk)("h4",null,"Stats",-1))),ha={key:0},pa=n((()=>(0,r.Lk)("br",null,null,-1))),ka={class:"table"},ba=n((()=>(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col"},"Status"),(0,r.Lk)("th",{scope:"col"},"Time")])],-1))),ma={key:1},va={key:1},ga=n((()=>(0,r.Lk)("h3",null,"Run this job to start...",-1))),La=[ga];function wa(a,t,e,n,m,g){const w=(0,r.g2)("router-link"),K=(0,r.g2)("Line");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("div",o,[c,(0,r.Lk)("ul",u,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(m.backups,((a,t)=>((0,r.uX)(),(0,r.CE)("li",{class:(0,s.C4)(["list-group-item",{active:t==m.currentIndex}]),key:t,onClick:e=>(g.setActiveTutorial(a,t),this.retreiveMetadata())},[(0,r.Lk)("div",h,[(0,r.Lk)("div",p,[(0,r.Lk)("div",k,(0,s.v_)(a.name),1),(0,r.Lk)("div",b,["[RUNNING]"==m.status[t]?((0,r.uX)(),(0,r.CE)("div",{class:"float-right spinner-grow spinner-grow-sm m-1",role:"status",key:t})):(0,r.Q3)("",!0),"success"==m.status[t]?((0,r.uX)(),(0,r.CE)("div",{class:"float-right sm mr-1",role:"status",key:t},v)):(0,r.Q3)("",!0),"warning"==m.status[t]?((0,r.uX)(),(0,r.CE)("div",{class:"float-right sm mr-1",role:"status",key:t},L)):(0,r.Q3)("",!0),"failure"==m.status[t]?((0,r.uX)(),(0,r.CE)("div",{class:"float-right sm mr-1",role:"status",key:t},A)):(0,r.Q3)("",!0)])])])],10,d)))),128)),(0,r.Lk)("li",f,[(0,r.Lk)("div",y,[(0,r.bo)((0,r.Lk)("input",{onKeypress:t[0]||(t[0]=(0,l.jR)(((...a)=>g.addBackup&&g.addBackup(...a)),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=a=>m.name=a),id:"name",name:"name",type:"text",class:"form-control",placeholder:"+ Añadir","aria-label":"Username","aria-describedby":"basic-addon1"},null,544),[[l.Jo,m.name]])])])])]),(0,r.Lk)("div",M,[m.currentBackup?((0,r.uX)(),(0,r.CE)("div",_,[C,(0,r.Lk)("div",null,[x,(0,r.Lk)("div",B,[(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",placeholder:"hostname.com, 192.168.1.15, ...","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":t[2]||(t[2]=a=>m.currentMetadata.ip_servidor=a),required:""},null,512),[[l.Jo,m.currentMetadata.ip_servidor]])]),E,(0,r.Lk)("div",H,[(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",placeholder:"nashostname.com, 192.168.1.14, ...","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":t[3]||(t[3]=a=>m.currentMetadata.ip_nas=a)},null,512),[[l.Jo,m.currentMetadata.ip_nas]])]),U,(0,r.Lk)("div",X,[(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",placeholder:"/path/of/your/backup/in/your/nas","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":t[4]||(t[4]=a=>m.currentMetadata.ruta_respaldo=a)},null,512),[[l.Jo,m.currentMetadata.ruta_respaldo]])]),V,m.currentMetadata.rash?((0,r.uX)(),(0,r.CE)("div",T)):((0,r.uX)(),(0,r.CE)("div",S,(0,s.v_)(m.currentMetadata.rash="echo <P4ssw0rd.> | sudo -S "),1)),(0,r.Lk)("div",I,[(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",placeholder:"echo <password> | sudo -S ","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":t[5]||(t[5]=a=>m.currentMetadata.rash=a),required:""},null,512),[[l.Jo,m.currentMetadata.rash]])]),F,(0,r.Lk)("div",N,[(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",placeholder:"root, alice, bob, ...","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":t[6]||(t[6]=a=>m.currentMetadata.user_servidor=a)},null,512),[[l.Jo,m.currentMetadata.user_servidor]])]),O,(0,r.Lk)("div",R,[(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",placeholder:"P4ssw0rd.","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":t[7]||(t[7]=a=>m.currentMetadata.pw_servidor=a)},null,512),[[l.Jo,m.currentMetadata.pw_servidor]])]),z,(0,r.Lk)("div",P,[(0,r.bo)((0,r.Lk)("input",{type:"number",class:"form-control",placeholder:"22","aria-label":"Username","aria-describedby":"basic-addon1",min:"1","onUpdate:modelValue":t[8]||(t[8]=a=>m.currentMetadata.port=a),required:""},null,512),[[l.Jo,m.currentMetadata.port]])]),J,(0,r.Lk)("div",Q,[(0,r.bo)((0,r.Lk)("input",{type:"number",class:"form-control",placeholder:"2","aria-label":"Username","aria-describedby":"basic-addon1",min:"1",max:"5","onUpdate:modelValue":t[9]||(t[9]=a=>m.currentMetadata.reintentos_maximos=a),required:""},null,512),[[l.Jo,m.currentMetadata.reintentos_maximos]])])]),m.noMetadataExists?((0,r.uX)(),(0,r.CE)("div",$,[(0,r.Lk)("div",null,[q,D,(0,r.Lk)("button",{type:"button",class:"btn btn-success",onClick:t[10]||(t[10]=a=>g.runBackup(m.currentIndex))},j),(0,r.eW)("  "),(0,r.bF)(w,{to:"/backups/"+m.currentBackup.id},{default:(0,r.k6)((()=>[(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[11]||(t[11]=a=>g.retreiveMetadata())},G)])),_:1},8,["to"]),(0,r.eW)("  "),(0,r.Lk)("button",{type:"button",class:"btn btn-warning",onClick:t[12]||(t[12]=a=>g.updateMetadata())},Z),(0,r.eW)("  "),(0,r.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[13]||(t[13]=a=>g.deleteBackup())},ta)])])):((0,r.uX)(),(0,r.CE)("div",ea,[(0,r.Lk)("div",null,[ra,sa,(0,r.Lk)("button",{type:"submit",class:"btn btn-info",onClick:t[14]||(t[14]=a=>g.addMetadata())},na),(0,r.eW)("  "),(0,r.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[15]||(t[15]=a=>g.deleteBackup())},oa)])]))])):(0,r.Q3)("",!0)]),m.currentBackup?((0,r.uX)(),(0,r.CE)("div",ca,[m.backup_traces?((0,r.uX)(),(0,r.CE)("div",ua,[da,m.backup_traces?((0,r.uX)(),(0,r.CE)("div",ha,[(0,r.Lk)("h5",null,(0,s.v_)(m.currentBackup.name),1),pa,(0,r.Lk)("table",ka,[ba,(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(m.backup_traces,((a,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:t},[(0,r.Lk)("td",null,(0,s.v_)(a.last_status),1),(0,r.Lk)("td",null,(0,s.v_)(a.createdAt),1)])))),128))])])])):(0,r.Q3)("",!0),m.chartArray?((0,r.uX)(),(0,r.CE)("div",ma,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(m.chartArray,((a,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t},[(0,r.bF)(K,{id:"my-chart-id",options:a.chartOptions,data:a.chartData},null,8,["options","data"])])))),128))])):(0,r.Q3)("",!0)])):((0,r.uX)(),(0,r.CE)("div",va,La))])):(0,r.Q3)("",!0)])}e(4114);var Aa=e(4753);class fa{getAll(){return Aa.A.get("/metadatas")}get(a){return Aa.A.get(`/metadatas/${a}`)}create(a){return Aa.A.post("/metadatas",a)}update(a,t){return Aa.A.put(`/metadatas/${a}`,t)}delete(a){return Aa.A.delete(`/metadatas/${a}`)}deleteAll(){return Aa.A.delete("/metadatas")}getMetaBackup(a){return Aa.A.get("/metadatas/metabackup",{params:{id_backup:a}})}}var ya=new fa,Ma=e(6405);class _a{getAll(){return Aa.A.get("/backups")}get(a){return Aa.A.get(`/backups/${a}`)}create(a){return Aa.A.post("/backups",a)}update(a,t){return Aa.A.put(`/backups/${a}`,t)}delete(a){return Aa.A.delete(`/backups/${a}`)}deleteAll(){return Aa.A.delete("/tutorials")}diffFiles(a){return Aa.A.post("/file_traces/difffiles",a)}historyFile(a){return Aa.A.post("/file_traces/historyfile",a)}}var Ca=new _a,xa=e(1691),Ba=e(4335),Ea=e(4527),Ha=e(2022);Ha.t1.register(Ha.hE,Ha.m_,Ha.s$,Ha.No,Ha.PP,Ha.kc,Ha.FN);var Ua={name:"backups-list",components:{Line:Ea.N1},data(){return{chartArray:[],backup_traces:null,backups:[],status:[],currentBackup:null,currentIndex:-1,title:"",name:"",currentMetadata:{id_backup:null,ruta_respaldo:"",ip_servidor:"",ip_nas:"",rash:"",user_servidor:"",pw_servidor:"",port:null,reintentos_maximos:null},noMetadataExists:!0,currentHistory:null}},methods:{async getBackupHistory(a){var t={id_backup:this.currentBackup.id,max:a};this.backup_traces=await new Promise(((a,e)=>{console.log(t),xa.A.backupHistory(t).then((t=>{a(t.data)})).catch((a=>{e(a)}))}))},color_by_id(a){switch(a){case 0:return"#007bff";case 1:return"#6610f2";case 2:return"#28a745";case 3:return"#dc3545";case 4:return"#ffc107";case 5:return"#fd7e14";case 6:return"#17a2b8";case 7:return"#e83e8c";case 8:return"#6f42c1";case 9:return"#20c997";default:return"#007bff"}},async retreiveHistoryFile(a){var t={id_backup:this.currentBackup.id,file:a};return await new Promise(((a,e)=>{console.log(t),Ca.historyFile(t).then((t=>{a(t.data)})).catch((a=>{e(a)}))}))},async retreiveDiffFiles(){var a={id_backup:this.currentBackup.id};await Ca.diffFiles(a).then((async a=>{let t,e=await a.data,r=[],s="",l=[],n=null,i=[],o="KB";for(let c in e){s=e[c].file;let a=await this.retreiveHistoryFile(s);l=[],r=[],o="KB";for(let t in a)r.push(a[t].createdAt),l.push(a[t].size);t=Math.max(...l),t>=1024**4?(o="PB",l=l.map((a=>a*(1/1024**4)))):t>=1024**3?(o="TB",l=l.map((a=>a*(1/1024**3)))):t>=1048576?(o="GB",l=l.map((a=>a*(1/1048576)))):t>=1024&&(o="MB",l=l.map((a=>a*(1/1024)))),console.log(t),console.log(c);let u=this.color_by_id(parseInt(c));n={chartData:{labels:r,datasets:[{label:s+" ("+o+")",data:l,tension:.3,borderColor:u,backgroundColor:u,pointRadius:3}]},chartOptions:{responsive:!0}},i.push(n)}console.log(i),this.chartArray=i})).catch((a=>{console.log(a)}))},retrievebackups(){console.log("Trayendo backups"),Ma.A.getAll().then((a=>{this.backups=a.data,console.log(a.data)})).catch((a=>{console.log(a)}))},async runBackup(a){this.status[a]="[RUNNING]";let t=`http://10.22.165.29:5000/?id=${this.currentBackup.id}`;Ba.A.create({baseURL:t,headers:{"Access-Control-Allow-Origin":"*",origin:"x-requested-with","Access-Control-Allow-Headers":"POST, GET, PUT, DELETE, OPTIONS, HEAD, Authorization, Origin, Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers, Access-Control-Allow-Origin","Content-Type":"application/json"}}),await Ba.A.get(t).then((t=>{console.log(t.data),"[ALL OK]"===t.data&&(this.status[a]="success"),"[NOT OK]"===t.data&&(this.status[a]="failure"),"[FINISHED WITH ERRORS]"===t.data&&(this.status[a]="warning"),this.retreiveDiffFiles(),this.getBackupHistory(5)}))},retreiveMetadata(){ya.getMetaBackup(this.currentBackup.id).then((async a=>{""!==a.data&&a.data.constructor===Object?(this.noMetadataExists=!0,this.currentMetadata=a.data,await this.retreiveDiffFiles(),await this.getBackupHistory(5)):(this.currentMetadata={id_backup:this.currentBackup.id,ruta_respaldo:"",ip_servidor:"",ip_nas:"",rash:"",user_servidor:"",pw_servidor:"",port:null,reintentos_maximos:null},this.noMetadataExists=!1)})).catch((a=>{console.log(a)}))},refreshList(){this.retrievebackups(),this.currentBackup=null,this.currentIndex=-1},setActiveTutorial(a,t){this.currentBackup=a,this.currentIndex=a?t:-1},displaySpinner(a,t){this.currentBackup=a,this.currentIndex=a?t:-1},removeAllbackups(){Ma.A.deleteAll().then((a=>{console.log(a.data),this.refreshList()})).catch((a=>{console.log(a)}))},searchTitle(){Ma.A.findByTitle(this.name).then((a=>{this.backups=a.data,this.setActiveTutorial(null),console.log(a.data)})).catch((a=>{console.log(a)}))},addBackup(){var a={name:this.name};console.log(a),Ma.A.create(a).then((a=>{this.backups.name=a.data.name,console.log(a.data),this.submitted=!0,this.name="",this.refreshList()})).catch((a=>{console.log(a)}))},deleteBackup(){Ma.A.delete(this.currentBackup.id).then((a=>{console.log(a.data),this.$router.push({name:"backups"}),this.refreshList()})).catch((a=>{console.log(a)}))},addMetadata(){var a=this.currentMetadata;let t=this.currentBackup,e=this.index;console.log(a),ya.create(a).then((a=>{this.currentMetadata=a.data,console.log(a.data),this.submitted=!0,this.retreiveMetadata(),this.refreshList(),this.setActiveTutorial(t,e)})).catch((a=>{console.log(a)}))},updateMetadata(){ya.update(this.currentMetadata.id,this.currentMetadata).then((a=>{console.log(a.data),this.message="The metadata was updated successfully!"})).catch((a=>{console.log(a)}))}},mounted(){this.retrievebackups()}},Xa=e(6262);const Va=(0,Xa.A)(Ua,[["render",wa],["__scopeId","data-v-4214bf40"]]);var Ta=Va}}]);
//# sourceMappingURL=166.e269d86c.js.map